---
title: "AWS credentials logged"
date: "`r Sys.Date()`"
weight: 6
chapter: false
pre: " <b> 2.6 </b> "
---

In this vulnerability, unencrypted AWS credentials can be logged which can expose those credentials to an attacker. Encrypt sensitive data, such as credentials, before they are logged to make the code more secure.

**1.** Copy the following code within your IDE.

```
def log_credentials_noncompliant():

    import boto3

    import logging

    session = boto3.Session()

    credentials = session.get_credentials()

    credentials = credentials.get_frozen_credentials()

    access_key = credentials.access_key

    secret_key = credentials.secret_key

    # Noncompliant: credentials are written to the logger.

    logging.info('Access key: ', access_key)

    logging.info('secret access key: ', secret_key)
```

**2.** Run Amazon Q Project Scan to see how the this vulnerability is detected.
![credentials-logged-1](/images/6/credentials-logged-1.png?width=90pc)
_Figure 1: Running a project scan to detect credentials being logged_

**3.** To views details of the findings, hold your cursor over the insecure code and click on "View Details" to learn more:
![credentials-logged-2](/images/6/credentials-logged-2.png?width=90pc)
_Figure 2: Viewing detailed information about the credentials logging vulnerability_

**4.** Avoid logging sensitive information such as access keys or secret keys. For AWS resource access management, prefer IAM roles over static access and secret keys, especially for applications running on AWS services like EC2, Lambda, etc. IAM roles provide temporary credentials automatically managed by AWS.

Below is an example of how this code can be fixed. Make sure to save the file prior to re-running the scan.

```
def log_credentials_compliant():

    import boto3

    session = boto3.Session()

    credentials = session.get_credentials()

    credentials = credentials.get_frozen_credentials()

    access_key = credentials.access_key

    secret_key = credentials.secret_key

    # Compliant: avoids writing credentials to the logger.

    session = boto3.Session(

        aws_access_key_id=access_key,

        aws_secret_access_key=secret_key

    )
```
